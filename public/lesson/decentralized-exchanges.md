
__________________________________________________________________________________________________________________________________________________________

$$$$$$$\                      $$\       $$\                                      $$$$$$\                           $$\                                   
$$  __$$\                     $$ |      $$ |                                    $$  __$$\                          $$ |                                  
$$ |  $$ | $$$$$$\  $$$$$$$\  $$ |  $$\ $$ | $$$$$$\   $$$$$$$\  $$$$$$$\       $$ /  $$ | $$$$$$$\ $$$$$$\   $$$$$$$ | $$$$$$\  $$$$$$\$$$$\  $$\   $$\ 
$$$$$$$\ | \____$$\ $$  __$$\ $$ | $$  |$$ |$$  __$$\ $$  _____|$$  _____|      $$$$$$$$ |$$  _____|\____$$\ $$  __$$ |$$  __$$\ $$  _$$  _$$\ $$ |  $$ |
$$  __$$\  $$$$$$$ |$$ |  $$ |$$$$$$  / $$ |$$$$$$$$ |\$$$$$$\  \$$$$$$\        $$  __$$ |$$ /      $$$$$$$ |$$ /  $$ |$$$$$$$$ |$$ / $$ / $$ |$$ |  $$ |
$$ |  $$ |$$  __$$ |$$ |  $$ |$$  _$$<  $$ |$$   ____| \____$$\  \____$$\       $$ |  $$ |$$ |     $$  __$$ |$$ |  $$ |$$   ____|$$ | $$ | $$ |$$ |  $$ |
$$$$$$$  |\$$$$$$$ |$$ |  $$ |$$ | \$$\ $$ |\$$$$$$$\ $$$$$$$  |$$$$$$$  |      $$ |  $$ |\$$$$$$$\\$$$$$$$ |\$$$$$$$ |\$$$$$$$\ $$ | $$ | $$ |\$$$$$$$ |
\_______/  \_______|\__|  \__|\__|  \__|\__| \_______|\_______/ \_______/       \__|  \__| \_______|\_______| \_______| \_______|\__| \__| \__| \____$$ |
                                                                                                                                               $$\   $$ |
                                                                                                                                               \$$$$$$  |
                                                                                                                                                \______/ 
__________________________________________________________________________________________________________________________________________________________
PORTABLE LESSON DATADISK‚Ñ¢ COLLECTION
---
LESSON TITLE: DECENTRALIZED EXCHANGES
DATA LOCATION: https://app.banklessacademy.com/lessons/decentralized-exchanges.md
PROTOCOL VERSION: 0.001
LAST UPDATED: 02/06/2023
__________________________________________________________________________________________________________________________________________________________

   << LESSON START >>


# What is a Decentralized Exchange?


Decentralized Exchanges (DEXs) are on-chain marketplaces that allow all Explorers to securely exchange cryptocurrency with each other ~~all~~ while maintaining self-custody of their wallet funds. These peer-to-peer trades are facilitated using publicly accessible smart contracts that connect users with large communal vaults of tokens called liquidity pools. Decentralized Exchanges can be found on almost all blockchains, and are present on both Ethereum Layer 1s and 2s.


Exchanging tokens is an essential part of using `DeFi` ‚Äî where you‚Äôll find a wider range of token variety and utility than on a `CEX`. Some users buy tokens to access on-chain products and services. Others purchase tokens as a short or long term investment ~~in an on-chain project~~. There are even tokens that grant you voting power used to determine the direction of their respective project ‚Äî much like holding shares in a traditional corporation! Regardless of your motivation, you‚Äôll be visiting Decentralized Exchanges on a regular basis in DeFi.


Let's learn how they work and how they can best serve you.


![](https://app.banklessacademy.com/lesson/decentralized-exchanges/what-is-a-decentralized-exchange-3d833117.svg)


# Centralized and Decentralized Exchanges


Let‚Äôs start by outlining the ~~main~~ differences between the technology used for a Centralized Exchange (like Coinbase, Binance, Kraken) and that of a Decentralized Exchange (like Uniswap, PancakeSwap).


Centralized Exchanges (`CEXs`) allow users to trade and invest in cryptocurrency ~~while remaining~~ outside ~~of~~ the blockchain ecosystem. As your account is on the CEX itself, your private keys and funds are in their custody. You‚Äôre subject to their management, rules, and risks.


Using Decentralized Exchanges (`DEXs`) is the practical use of cryptocurrency systems; You are on the blockchain, using it for the purpose it was built. The peer-to-peer model allows you to play both the consumer and the provider ‚Äî accessing financial opportunities previously available only to the financial class. The system is both transparent and censorship-resistant, creating an even playing field while protecting users from hackers, the state, or any participant seeking to gain an unfair advantage.


![](https://app.banklessacademy.com/lesson/decentralized-exchanges/centralized-and-decentralized-exchanges-d8c9e196.svg)


# ‚úÖ Knowledge Check


Which of the following is true regarding cryptocurrency exchanges?

- [ ] There is no team behind a DEX.

> ‚ÑπÔ∏è DEXs still have development teams, but their influence on the project is limited.

- [ ] You can only lose funds on a CEX to a bad trade.

> ‚ÑπÔ∏è Even CEXs have their risks. In 2022, the FTX exchange collapsed, with almost all users losing their deposits.

- [ ] DEXs allow you to trade while maintaining self-custody, while CEXs do not.

> ‚ÑπÔ∏è  Unless explicitly stated otherwise, a CEX owns your private keys.


# Decentralized Applications


DEXs are a type of `dApp` ‚Äî a decentralized application running on the blockchain. For an internet application to be considered fully ‚Äòdecentralized‚Äô it needs to facilitate a user‚Äôs desired ~~blockchain~~ action with zero need for oversight or a third party~~, for any user that uses it~~.


This service is facilitated using smart contracts, lines of code that take a user‚Äôs on-chain action and return a predictable on-chain ~~action in~~ response. The Ethereum Foundation compares smart contracts to vending machines: The user inputs the number corresponding to the item they‚Äôd like to receive, plus the appropriate amount of money, and they receive an expected output ‚Äî their snack ‚Äî ~~all~~ without the need for another person to facilitate the transaction.


DEX dApps handle a variety of commands, like swapping, voting, or adding and removing liquidity.


![](https://app.banklessacademy.com/lesson/decentralized-exchanges/decentralized-applications-86dbc365.svg)


# Decentralized Applications (continued)


DEXs follow the same format as the vending machine: they take a user‚Äôs input token and output the desired token. Other dApp examples include:


üéüÔ∏è **Voting dApps:** allocating a user‚Äôs vote to a specified party.


üì¶ **Bridge dApps:** transferring a user‚Äôs cryptocurrency from one network to another.


ü§ù **Lending/Borrowing dApps:** granting loans to users meeting specified requirements.


Smart contracts are actually accounts on Ethereum ‚Äî they have an address and balance, performing automated actions when prompted by a transfer and command. A DEX is really a programmed Ethereum account with several available functions.


`dApps` will typically use a website as a visual interface to help users interact with their smart contracts. If the website is down, you can still access the smart contract with some experience!


![](https://app.banklessacademy.com/lesson/decentralized-exchanges/decentralized-applications-continued-274cea35.svg)


# ‚úÖ Knowledge Check


Which of the below properties are needed for a smart contract to be considered decentralized?

- [ ] Permissionless: open access to all users.

> ‚ÑπÔ∏è This is a quality of a dApp, but it isn‚Äôt the only one.

- [ ] Autonomous: users‚Äô interactions do not need an intermediary.

> ‚ÑπÔ∏è This is a quality of a dApp, but it isn‚Äôt the only one.

- [ ] Transparent: the smart contract code is publicly available.

> ‚ÑπÔ∏è This is a quality of a dApp, but it isn‚Äôt the only one.

- [ ] All of the above.

> ‚ÑπÔ∏è Ethereum dApps are respected for their ability to be permissionless, autonomous, and transparent.


# Automated Market Makers


In traditional markets and `CEXs`, your custodian uses an order book: a database filled with buy and sell offers. The CEX connects your trade offer with another person‚Äôs. You are usually charged a base/scaling commission on your trade, and you‚Äôre also left wondering if the undisclosed matching method found you the best possible deal.~~‚Ä¶ or if a large preferred party was given the better end.~~


`DEXs` use ‚ÄòAutomated Market Maker‚Äô (`AMM`) technology, a matchmaking system that makes the best trade based on a public algorithm. As this algorithm is open-source, anyone can understand, clone, and improve it ‚Äî leading to healthy competition, constant innovation, and better trades for everyone.


AMMs route user trades through `liquidity pools`, rather than directly matching user bids and asks. These communal token vaults accumulate and dispense tokens according to user interactions, providing a more transparent and fair trade as compared to order book technology.


![](https://app.banklessacademy.com/lesson/decentralized-exchanges/automated-market-makers-4154a3c7.svg)


# ‚úÖ Knowledge Check


What is the benefit of using AMMs to complete trades as compared to a traditional order book?

- [ ] The AMM trade is faster than an order book trade.

> ‚ÑπÔ∏è When we include network confirmation time, this isn‚Äôt necessarily true.

- [ ] AMMs connect you directly to the other user.

> ‚ÑπÔ∏è AMMs route user trades through communal token vaults, called liquidity pools, rather than directly to one another.

- [ ] You are more confident that another party hasn‚Äôt benefited unfairly from your trade.

> ‚ÑπÔ∏è The transparent nature of AMMs means that its a lot harder for platforms to hide malicious actions ‚Äî or for users to be malicious at all!


# Token Swaps


On the blockchain, we refer to cryptocurrency trades as `token swaps`. These smart contract interactions are the conversion from one cryptocurrency to another, using AMM `liquidity pools`. By forming a `trade route`, a pathway through the appropriate liquidity pools, a DEX smart contract converts your input token into your desired output token. As liquidity pools often consist of only two tokens, and because there aren‚Äôt always liquidity pools for every `token pair`, trade routes may run through more than one liquidity pool to fulfil your swap.


In order for a smart contract to access our wallet, we grant it permission to withdraw funds up to a specified (or unlimited) amount. These `token allowances` enable trusted smart contracts to carry out our transactions without sharing our wallet private key. Granting permissions incurs a gas fee, so the permission is left open for future interactions with your wallet. This is one of the reasons why it is safer to use one wallet for trading, while reserving a separate wallet for holding. We‚Äôll monitor and revoke token allowances in future content!


![](https://app.banklessacademy.com/lesson/decentralized-exchanges/token-swaps-86b7ec84.svg)


# Token Swaps (continued)


Let‚Äôs take a look at an example swap to understand the permission and exchange process. The example is a swap between USDC to OP on Velodrome ‚Äî a large DEX on the Optimism network. The trade is routed through two pools as there is no direct USDC/OP pool on Velodrome:

1. First, you grant the appropriate Velodrome smart contract the permission to make USDC withdrawals from your wallet.
2. You submit your swap transaction request to Velodrome.
3. The transaction is accepted: Velodrome withdraws the specified amount of USDC from your wallet, into the USDC/ETH liquidity pool. ETH exits this first liquidity pool and is transferred to the ETH/OP liquidity pool. Lastly, OP is dispensed from the second liquidity pool to your wallet address.

The swap transaction is complete. Your USDC tokens have been swapped for OP!


![](https://app.banklessacademy.com/lesson/decentralized-exchanges/token-swaps-continued-3ec28582.svg)


# ‚úÖ Knowledge Check


AMMs can route a trade through multiple liquidity pools, all in a single transaction.

- [ ] True

> ‚ÑπÔ∏è Correct! You might pay a higher network fee, but the actions are bundled into one transaction.

- [ ] False

> ‚ÑπÔ∏è Incorrect, try again.


# What is Liquidity?


Liquidity in the crypto space refers to a marketplace‚Äôs ability to facilitate digital asset buys and sells at fair prices. When liquidity is high, prices are more stable; when liquidity is low, prices are more volatile. As users are generally attracted to fairer prices, `DEXs` aim to have high liquidity across all of their liquidity pools.


High liquidity means there is a high quantity of tokens in the liquidity pool ‚Äî generally a 50/50 valuation split of the two tokens users are trading in and out of the pool. For example, the USDC/ETH pool on Balancer facilitates all trades between this `token pair` on their platform.
When there are more tokens, users making trades through the pool have less impact on the 50/50 asset balance, which helps prices remain stable. The amount by which any trade throws off this balance is known as `price impact`.


As an Explorer, you want the lowest price impact on your trades as possible, in order to receive the best deal! That means you want high, balanced liquidity.


![](https://app.banklessacademy.com/lesson/decentralized-exchanges/what-is-liquidity-d4c58b6f.svg)


# Liquidity Providers


Optimizing for high `liquidity` is integral to the success of a DEX ‚Äî but because there‚Äôs only so much liquidity in the cryptocurrency ecosystem, each DEX is in competition to capture as much liquidity as possible. So where does this liquidity come from?


In a decentralized ecosystem, internet citizens are incentivised to provide liquidity to a given pool to raise the TVL (total value locked) on a platform. Fees gathered from users making trades through the pool are distributed to the LPs (liquidity providers) based on the amount of liquidity provided. You heard that right: by lending your tokens to a DEX liquidity pool, you can generate passive income.


There are a variety of considerations when becoming an `LP`, and we‚Äôll cover this in future content. For now, know that the large APR (annual projected return) rates displayed across DEX liquidity pools aren‚Äôt guaranteed, and there can be losses.


![](https://app.banklessacademy.com/lesson/decentralized-exchanges/liquidity-providers-5b17c802.svg)


# ‚úÖ Knowledge Check


Finish the statement: ‚ÄúWhen liquidity is __________.‚Äù

- [ ] high, volatility is high.

> ‚ÑπÔ∏è Incorrect, try again.

- [ ] low, volatility is low.

> ‚ÑπÔ∏è Incorrect, try again.

- [ ] low, volatility is high.

> ‚ÑπÔ∏è Right! Liquidity and volatility are generally inversely-correlated.


# ‚úÖ Knowledge Check


How do DEXs incentivize users to provide liquidity?

- [ ] Insurance for trade losses.

> ‚ÑπÔ∏è Neither CEXs or DEXs protect you from losses on a bad investment.

- [ ] A share of platform fees.

> ‚ÑπÔ∏è The fees charged to use the DEX are often split across various platform stakeholders ‚Äî including LPs.

- [ ] Access to private liquidity pools.

> ‚ÑπÔ∏è There are no private liquidity pools, low traffic wouldn‚Äôt provide adequate returns.

- [ ] All of the above.

> ‚ÑπÔ∏è There‚Äôs only one correct answer here, can you figure out which one it is?


# Platform Fees


Both CEXs and DEXs charge fees for the services they provide. While the automation of DEX and AMM technology has reduced the cost for exchanging cryptocurrency, interacting with the blockchain still has its cost. Let‚Äôs take a look at five common costs to consider when deciding which platform to use.


üè∑Ô∏è **Platform fees:** Approximately 0.5% commission on each trade for most CEXs, and 0.05% for most DEXs. These can fluctuate.


üåê **Network fees:** Blockchains charge gas fees on top of the dApp transaction. You can minimize these costs by using the network during low periods of activity. Etherscan.io has a real-time estimate tool for various Ethereum Mainnet actions here: [Etherscan.io](https://etherscan.io/gastracker) (for DEXs, refer to the ‚ÄòSwap‚Äô action). On Layer 2s, fees are far cheaper: [l2fees.info](https://l2fees.info/)


üì¶ **Bridge fees:** Both CEXs and the blockchain will charge a flat rate for transferring cryptocurrency from one blockchain network to another. For CEXs, refer to their on-site information. For the blockchain, check out the ‚ÄòDeposit‚Äô action on [Etherscan.io](https://etherscan.io/gastracker).


üíπ **Exchange rates:** When buying cryptocurrency directly with fiat on a CEX or DEX, watch out for exchange rates that don‚Äôt reflect the market rate.


üßä **Slippage:** As prices change so quickly in this space, DEXs leave room for error on a swap ‚Äî this is called `slippage`. This percentage value is customizable, with most dApps recommending 0.5-2%. You may lose up to the slippage value on a trade to have it executed, but if your slippage range is too low the trade might be rejected.


As you can see, there are many factors to consider when comparing exchange fees. It‚Äôs always best to do your own research before making a trade to make sure the platform's advantages and disadvantages are right for you.


# DEX Advantages


We‚Äôve covered a lot of theory in this lesson, but you might still be wondering if DEXs are for you. Generally speaking, you are probably going to benefit from Decentralized Exchanges if:

- üîë You want to maintain custody over your digital assets.
- üîí You want to secure your assets on the blockchain, avoiding CEX collapses.
- ‚åõ You want 24/7 access to the cryptocurrency market.
- üëõ You want access to a wider range of cryptocurrencies.
- ü§ë You are interested in providing liquidity.
- üõÇ You don‚Äôt want to register and `KYC` on every platform you interact with.
- ‚öîÔ∏è You seek the additional risks and rewards of exploring Decentralized Finance.

With that said, almost every DeFi user has an account on a Centralized Exchange. This is because CEXs have easy on/off ramp features to the traditional banking world; you can easily get money from your bank account onto the blockchain and vice-versa. DeFi users like to compare this to using the bathroom: you go in, you do your business, you leave.


This is great because it means you can start with a CEX account and slowly transition to DeFi as you become more confident in navigation.


# DEX Risks


Using a DEX also comes with risk. Here are a few of the most impactful:


üêû **Smart contract risk:** While audits reduce the chances of smart contract bugs, they still exist. In a rare, worst-case scenario, you could lose up to your trade amount to a bug. Only interact with trusted, heavily audited dApps.


üí∞ **Self-custody risk:** Sole responsibility for your private keys means you could lose an entire wallet to theft, scams, or a misplaced seed phrase. This is why it is important to mitigate risk with a multi-wallet strategy, and to always keep a copy of your seed phrases backed up in a secure, real-world location.


ü•™ **Sandwich attacks:** Setting your swap slippage high increases the likelihood of trade frontrunners coordinating `sandwich attacks` against you. In a sandwich attack, you could lose up to your slippage amount on a trade. We‚Äôll cover how to protect yourself from this style of attack in future content.


With these advantages and risks considered, a CEX might be a better fit for your ~~needs~~ if:

- üéì You‚Äôre still early in your cryptocurrency journey, working to understand the risks and rewards.
- ‚öñÔ∏è Your trade frequency and volume are small, making blockchain fees an unrealistic cost.
- üè∞ You‚Äôd prefer to trust an exchange to watch your funds, rather than being responsible for them.

Some users take a hybrid approach to lower their overall risk, using a CEX to buy and sell their cryptocurrency, while storing it on the blockchain itself.


# ‚úÖ Knowledge Check


Why would you use a Decentralized Exchange over a Centralized Exchange?

- [ ] You want to access tokens not listed on a Centralized Exchange.

> ‚ÑπÔ∏è This is a quality of a DEX, but it isn‚Äôt the only one.

- [ ] You want to maintain full custody over the exchanged funds.

> ‚ÑπÔ∏è This is a quality of a DEX, but it isn‚Äôt the only one.

- [ ] You‚Äôd like to access tools and opportunities not traditionally available to you.

> ‚ÑπÔ∏è This is a quality of a DEX, but it isn‚Äôt the only one.

- [ ] All of the above.

> ‚ÑπÔ∏è Right! DEXs offer all of these benefits over CEXs.


# Choosing a DEX


There are many Decentralized Exchanges in DeFi, and some are better than others. We often look at five main factors when deciding on which DEX to use:


ü•á **Legitimacy****:** Is the entity well known for its trustworthiness, quality, and longevity?


‚õ≤ **Liquidity:** Is the liquidity pool `TVL` high enough to give reasonable price impact?


üñ±Ô∏è **Ease of use:** Is the user interface easy to interact with?


üîê **Security:** Have the smart contracts been audited by multiple auditors?


üéÅ **Rewards and Features:** Are there loyalty rewards for using the exchange or providing liquidity? Can you vote in governance?


Notable names that score highly in these areas include Uniswap, Curve, Velodrome, and Balancer. You can easily move from one DEX to another until you find a few favorites! For the lesson quest, we‚Äôre going to use Velodrome ‚Äî the number one DEX by TVL on Optimism. It‚Äôs well known, easy to use, has the deepest liquidity on the network, and because it‚Äôs on L2 the fees are far more reasonable!


# DEX Best Practices


Before you interact with a dApp, there are some best practices you should follow to keep your funds safe:


üë©‚Äçüíª Always verify the link to a dApp by checking the official project Twitter (gold check mark) or a trusted third party, and bookmark it once you‚Äôve validated it. A variety of DeFi scams begin with a fake link ‚Äî even on popular search engines.


üîì We will be prompted to grant on-chain `token allowances` to a smart contract to give it access to specific tokens in our wallet. You should limit these allowances to your trade amount to prevent interaction with additional funds.


‚ôüÔ∏è Avoid interacting with dApps on your HODL wallet. It‚Äôs better to use a separate wallet dedicated to dApps in case anything goes wrong. Check out our [Web3 Security lesson](https://app.banklessacademy.com/lessons/web3-security) for more information on wallet strategies, and how to stay safe in Web3.


Now you‚Äôre ready to interact with a Decentralized Exchange!


![](https://app.banklessacademy.com/lesson/decentralized-exchanges/dex-best-practices-7f72a0d5.svg)


# ‚úÖ Knowledge Check


How can you protect yourself while using a reputable DEX that you haven‚Äôt tried before?

- [ ] By only following URLs provided by a trusted party, and using thoroughly audited smart contracts.

> ‚ÑπÔ∏è Right, only interacting with trustworthy URLs is one layer of protection.

- [ ] By performing a small test interaction when using the platform for the first time.

> ‚ÑπÔ∏è A single interaction with a bad smart contract can drain your entire wallet.

- [ ] Both of the above.

> ‚ÑπÔ∏è Incorrect. A single interaction with a bad smart contract can drain your entire wallet.

